# 암호화폐 분석 프로젝트 Flow Chart

## 📊 전체 시스템 흐름도

```
                    ┌─────────────────────────┐
                    │     프로그램 시작        │
                    │     (main.py)           │
                    └───────────┬─────────────┘
                                │
                    ┌───────────▼─────────────┐
                    │    환영 메시지 출력      │
                    └───────────┬─────────────┘
                                │
                    ┌───────────▼─────────────┐
                    │      메뉴 표시          │
                    │  1. 포트폴리오 분석     │
                    │  2. 가격 알림 시스템    │
                    │  3. 수익률 계산기       │
                    │  4. 종료               │
                    └───────────┬─────────────┘
                                │
                    ┌───────────▼─────────────┐
                    │    사용자 선택 입력      │
                    └───┬────┬────┬────┬──────┘
                        │    │    │    │
         ┌──────────────┘    │    │    └──────────────┐
         │              ┌────┘    └────┐              │
         │              │              │              │
         ▼              ▼              ▼              ▼
    ┌─────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────┐
    │ Phase 2 │  │   Phase 3   │  │   Phase 4   │  │  종료   │
    │포트폴리오│  │가격 알림    │  │수익률 계산기│  │ 프로그램 │
    │ 분석기  │  │ 시스템      │  │             │  │         │
    └─────────┘  └─────────────┘  └─────────────┘  └─────────┘
         │              │              │              │
         └──────────────┼──────────────┼──────────────┘
                        │              │
                        │              │
         ┌──────────────▼──────────────▼──────────────┐
         │            결과 출력 및               │
         │           메뉴로 돌아가기              │
         └──────────────┬─────────────────────────┘
                        │
                        └─────────────────┐
                                         │
                    ┌────────────────────▼─┐
                    │   계속 진행 여부     │
                    │     확인            │
                    └────────┬────────────┘
                             │
                    ┌────────▼────────┐
                    │  종료 또는      │
                    │ 메뉴로 돌아가기  │
                    └─────────────────┘
```

---

## 🔧 Phase 2: 포트폴리오 분석기 흐름도

```
        ┌─────────────────────────────┐
        │  포트폴리오 분석기 시작      │
        └─────────────┬───────────────┘
                      │
        ┌─────────────▼───────────────┐
        │     포트폴리오 선택         │
        │  1. 샘플 포트폴리오         │
        │  2. 직접 입력               │
        └─────────┬───────┬───────────┘
                  │       │
         ┌────────┘       └────────┐
         │                         │
         ▼                         ▼
┌──────────────┐        ┌──────────────────┐
│  샘플 데이터  │        │   사용자 입력    │
│    로드       │        │ 마켓코드 + 수량  │
└──────┬───────┘        └─────────┬────────┘
       │                          │
       └──────────┬─────────────────┘
                  │
        ┌─────────▼─────────┐
        │ 포트폴리오 검증   │
        │  - 마켓코드 형식  │
        │  - 수량 유효성    │
        └─────────┬─────────┘
                  │
                  ▼
        ┌─────────────────────┐    ┌─────────────────┐
        │   검증 실패?        │───▶│  오류 메시지    │
        │                     │    │     출력        │
        └─────────┬───────────┘    └─────────────────┘
                  │ 검증 성공
                  ▼
        ┌─────────────────────┐
        │   현재가 API 호출   │
        │ get_current_prices  │
        └─────────┬───────────┘
                  │
                  ▼
        ┌─────────────────────┐    ┌─────────────────┐
        │   API 호출 실패?    │───▶│  오류 메시지    │
        │                     │    │     출력        │
        └─────────┬───────────┘    └─────────────────┘
                  │ API 성공
                  ▼
        ┌─────────────────────┐
        │   개별 가치 계산    │
        │ 현재가 × 보유수량   │
        └─────────┬───────────┘
                  │
                  ▼
        ┌─────────────────────┐
        │  전체 가치 계산     │
        │ 모든 개별가치 합계  │
        └─────────┬───────────┘
                  │
                  ▼
        ┌─────────────────────┐
        │    비중 계산        │
        │ (개별가치/총가치)×100 │
        └─────────┬───────────┘
                  │
                  ▼
        ┌─────────────────────┐
        │     결과 출력       │
        │  - 요약 정보        │
        │  - 상세 테이블      │
        └─────────────────────┘
```

---

## 🔔 Phase 3: 가격 알림 시스템 흐름도

```
        ┌─────────────────────────────┐
        │   가격 알림 시스템 시작     │
        └─────────────┬───────────────┘
                      │
        ┌─────────────▼───────────────┐
        │       설정 방식 선택        │
        │   1. 프리셋 (빠른 테스트)   │
        │   2. 직접 설정              │
        └─────────┬───────┬───────────┘
                  │       │
         ┌────────┘       └────────┐
         │                         │
         ▼                         ▼
┌──────────────┐        ┌──────────────────┐
│  프리셋 설정  │        │   사용자 설정    │
│  BTC, 자동   │        │ 마켓 + 목표가    │
│  목표가 계산  │        │   직접 입력      │
└──────┬───────┘        └─────────┬────────┘
       │                          │
       └──────────┬─────────────────┘
                  │
        ┌─────────▼─────────┐
        │   현재가 조회     │
        │ get_single_price  │
        └─────────┬─────────┘
                  │
                  ▼
        ┌─────────────────────┐    ┌─────────────────┐
        │   조회 실패?        │───▶│  오류 메시지    │
        │                     │    │     출력        │
        └─────────┬───────────┘    └─────────────────┘
                  │ 조회 성공
                  ▼
        ┌─────────────────────┐
        │   목표가 계산       │
        │ 상한가 = 현재가×1.05│
        │ 하한가 = 현재가×0.95│
        └─────────┬───────────┘
                  │
                  ▼
        ┌─────────────────────┐
        │  모니터링 정보 출력  │
        │ 코인명, 목표가, 횟수 │
        └─────────┬───────────┘
                  │
                  ▼
        ┌─────────────────────┐
        │   모니터링 루프     │
        │   (설정 횟수만큼)   │
        └─────────┬───────────┘
                  │
                  ▼ ┌─────────────────┐
        ┌─────────────────────┐ │                 │
        │   현재가 조회       │ │  사용자 중단    │
        │    (실시간)         │ │   (Ctrl+C)      │
        └─────────┬───────────┘ │                 │
                  │             └─────────────────┘
                  ▼                       │
        ┌─────────────────────┐           │
        │   알림 조건 확인    │           │
        │ 상한가/하한가 비교  │           │
        └─────────┬───────────┘           │
                  │                       │
                  ▼                       │
        ┌─────────────────────┐           │
        │     상태 출력       │           │
        │ 시간 + 현재가 + 상태│           │
        └─────────┬───────────┘           │
                  │                       │
                  ▼                       │
        ┌─────────────────────┐           │
        │   알림 발생?        │           │
        │                     │           │
        └───┬─────────┬───────┘           │
            │ Yes     │ No                │
            ▼         ▼                   │
    ┌─────────────┐ ┌─────────────┐       │
    │ 🔴 상한가   │ │ ✅ 정상     │       │
    │ 🔵 하한가   │ │    범위     │       │
    │ 알림 출력   │ │             │       │
    └─────────────┘ └─────────────┘       │
            │         │                   │
            └─────────┼───────────────────┘
                      │
                      ▼
        ┌─────────────────────┐
        │   다음 사이클로     │
        │   (interval 대기)   │
        └─────────┬───────────┘
                  │
                  ▼
        ┌─────────────────────┐
        │  모든 사이클 완료?  │
        └───┬─────────────┬───┘
            │ No          │ Yes
            │             ▼
            │   ┌─────────────────────┐
            │   │   모니터링 완료     │
            │   │   결과 요약 출력    │
            │   └─────────────────────┘
            │
            └──────────────┐
                          │
            ┌─────────────▼─────────────┐
            │       루프 계속           │
            └───────────────────────────┘
```

---

## 📈 Phase 4: 수익률 계산기 흐름도

```
        ┌─────────────────────────────┐
        │    수익률 계산기 시작       │
        └─────────────┬───────────────┘
                      │
        ┌─────────────▼───────────────┐
        │       실행 모드 선택        │
        │  1. 단일 시나리오           │
        │  2. 프리셋 비교             │
        │  3. 커스텀 다중 시나리오    │
        └─────┬───────┬───────┬───────┘
              │       │       │
     ┌────────┘       │       └────────┐
     │                │                │
     ▼                ▼                ▼
┌─────────┐  ┌─────────────────┐  ┌─────────────┐
│  단일   │  │   프리셋 비교   │  │ 커스텀 다중 │
│시나리오 │  │ (4개 시나리오)  │  │ 시나리오    │
└────┬────┘  └─────────┬───────┘  └──────┬──────┘
     │                 │                 │
     └─────────────────┼─────────────────┘
                       │
        ┌──────────────▼──────────────┐
        │        투자 설정 입력       │
        │  - 마켓 코드 (KRW-BTC)     │
        │  - 투자 시점 (N일 전)      │
        │  - 투자 금액 (원)          │
        └──────────────┬──────────────┘
                       │
        ┌──────────────▼──────────────┐
        │      입력 데이터 검증       │
        │  - 일수 > 0                │
        │  - 금액 > 0                │
        │  - 마켓코드 형식            │
        └──────────────┬──────────────┘
                       │
                       ▼
        ┌──────────────────────────┐  ┌─────────────────┐
        │      검증 실패?          │─▶│  오류 메시지    │
        │                          │  │     출력        │
        └──────────────┬───────────┘  └─────────────────┘
                       │ 검증 성공
                       ▼
        ┌──────────────────────────┐
        │    과거 데이터 API 호출  │
        │  get_historical_data     │
        │   (N+5일분 여유 포함)    │
        └──────────────┬───────────┘
                       │
                       ▼
        ┌──────────────────────────┐  ┌─────────────────┐
        │     API 호출 실패?       │─▶│  오류 메시지    │
        │                          │  │     출력        │
        └──────────────┬───────────┘  └─────────────────┘
                       │ API 성공
                       ▼
        ┌──────────────────────────┐
        │   투자 시점 가격 추출    │
        │  historical_data[N-1]    │
        │    trade_price           │
        └──────────────┬───────────┘
                       │
                       ▼
        ┌──────────────────────────┐  ┌─────────────────┐
        │    가격 데이터 없음?     │─▶│  오류 메시지    │
        │                          │  │     출력        │
        └──────────────┬───────────┘  └─────────────────┘
                       │ 데이터 존재
                       ▼
        ┌──────────────────────────┐
        │      현재가 API 호출     │
        │    get_single_price      │
        └──────────────┬───────────┘
                       │
                       ▼
        ┌──────────────────────────┐  ┌─────────────────┐
        │     현재가 조회 실패?    │─▶│  오류 메시지    │
        │                          │  │     출력        │
        └──────────────┬───────────┘  └─────────────────┘
                       │ 조회 성공
                       ▼
        ┌──────────────────────────┐
        │      수익률 계산         │
        │ 구매수량 = 투자금액/투자가격│
        │ 현재가치 = 구매수량×현재가 │
        │ 손익 = 현재가치-투자금액   │
        │ 수익률 = (손익/투자금액)×100│
        └──────────────┬───────────┘
                       │
                       ▼
        ┌──────────────────────────┐
        │     연간 수익률 계산     │
        │   (복리 기준 환산)       │
        └──────────────┬───────────┘
                       │
                       ▼
        ┌──────────────────────────┐
        │      결과 출력           │
        │  - 투자 정보 요약        │
        │  - 가격 변화 분석        │
        │  - 손익 및 수익률        │
        │  - 투자 성과 평가        │
        └──────────────┬───────────┘
                       │
                       ▼
        ┌──────────────────────────┐
        │    다중 시나리오인가?    │
        └──┬───────────────────┬───┘
           │ No               │ Yes
           ▼                  ▼
    ┌─────────────┐    ┌─────────────────┐
    │   완료      │    │  비교 테이블    │
    │             │    │     출력        │
    └─────────────┘    │  - 전체 통계    │
                       │  - 최고/최저    │
                       │  - 포트폴리오   │
                       │    분석 결과    │
                       └─────────────────┘
```

---

## 🔄 공통 유틸리티 흐름

```
           ┌─────────────────────────────┐
           │       API 호출 요청         │
           │    (market, params)         │
           └─────────────┬───────────────┘
                         │
           ┌─────────────▼───────────────┐
           │     make_api_request        │
           │  - 요청 전송 (requests)     │
           │  - 타임아웃 설정            │
           │  - 재시도 로직 (3회)        │
           └─────────────┬───────────────┘
                         │
                         ▼
           ┌─────────────────────────────┐
           │       응답 처리             │
           │  - JSON 파싱                │
           │  - 에러 체크                │
           │  - 데이터 검증              │
           └─────────────┬───────────────┘
                         │
                         ▼
           ┌─────────────────────────────┐
           │      결과 포맷팅            │
           │  - 통화 형식 (1,000,000원)  │
           │  - 퍼센트 (12.34%)          │
           │  - 암호화폐 수량            │
           │  - 테이블 생성              │
           └─────────────────────────────┘
```

이 흐름도들은 각 Phase의 실행 흐름과 의사결정 지점, 에러 처리 과정을 명확히 보여줍니다.