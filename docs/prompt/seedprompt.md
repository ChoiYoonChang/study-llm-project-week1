## 1. 프로젝트 소개

<aside>
💡

이 프로젝트는 파이썬 기초 과정에서 배운 내용들을 종합하여 암호화폐 데이터를 API를 통해 직접 불러오고 분석하는 실습입니다.

</aside>

### 학습 목표

- 외부 API를 통해 암호화폐 시세 데이터를 불러올 수 있다.
- 불러온 데이터를 표 형태로 정리하고 필요한 열만 추출할 수 있다.
- 가격 변동 추이를 차트로 시각화할 수 있다.
- 데이터 수집 → 정리 → 분석 → 시각화의 과정을 한 흐름으로 경험할 수 있다.

### 프로젝트 구분

프로젝트는 **필수 과제**와 **도전 과제**로 나뉘며, 필수 과제는 반드시 제출해야 하고, 도전 과제는 선택적으로 수행하면 됩니다.

| **필수 과제** | 문제1. 암호화폐 포트폴리오 분석기 |
| --- | --- |
| **필수 과제** | 문제2. 가격 알림 시스템 |
| **도전 과제** | 문제3. 암호화폐 수익률 계산기 |

---

## 2. [필수 과제] 문제1: 암호화폐 포트폴리오 분석기

<aside>
✅

다음 조건을 만족하는 포트폴리오 분석 프로그램을 작성하시오:

1. 보유 암호화폐와 수량을 딕셔너리로 정의
2. 각 암호화폐의 현재 가치 계산
3. 전체 포트폴리오 가치 계산
4. 각 암호화폐의 포트폴리오 내 비중 계산
</aside>

### 구현 단계

1. **포트폴리오 정의**
    - 딕셔너리로 보유한 암호화폐와 수량을 저장한다.
    - 예: `"KRW-BTC": 0.1, "KRW-ETH": 2.5`
2. **현재가 조회 함수 작성 (`get_current_prices_api`)**
    - `requests` 모듈을 사용하여 업비트 API에서 현재가를 조회한다.
    - 응답을 JSON으로 변환 후, 코인별 현재가(`trade_price`)를 딕셔너리에 담아 반환한다.
3. **포트폴리오 분석 함수 작성 (`analyze_portfolio`)**

   (1) **현재가 조회**

    - 보유 코인 목록을 API에 전달하여 현재가 데이터를 가져온다.

   (2) **각 암호화폐별 분석**

    - 현재가 × 보유 수량 → 개별 가치 계산
    - `portfolio_analysis` 리스트에 코인명, 수량, 현재가, 가치 저장
    - 동시에 `total_value`(총합)를 누적

   (3) **비중 계산**

    - 개별 가치 ÷ 총합 × 100 으로 각 암호화폐의 비중을 추가
    - `현재가 × 보유 수량`
    - 예: 비트코인 0.1개 × 50,000,000원 = 5,000,000원
4. **분석 결과 출력**
    - 총 포트폴리오 가치를 출력한다.
    - 표 형태로 코인 / 수량 / 현재가 / 가치 / 비중을 출력한다.

### 구현 힌트 (펼쳐보기)

- **포트폴리오 정의**

  보유 코인을 딕셔너리 형태로 저장합니다.

    ```python
    portfolio = {
        "KRW-BTC": 0.1,
        "KRW-ETH": 2.5
    }
    ```

- **현재가 조회**

  업비트 API를 호출해서 받은 JSON 데이터에서 `trade_price` 값을 꺼내면 됩니다.

    ```python
    for data in prices_data:
        prices[data['market']] = data['trade_price']
    ```

- **가치 계산**

  각 코인의 가치는 `현재가 × 수량`으로 구하고, 총합은 반복문에서 누적합니다.

    ```python
    value = price * quantity
    total_value += value
    ```

- **비중 계산**

  총합이 구해졌다면, 각 항목에 비중을 추가할 수 있습니다.

    ```python
    item["비중"] = (item["가치"] / total_value) * 100
    ```

구현 힌트 (펼쳐보기)
포트폴리오 정의
보유 코인을 딕셔너리 형태로 저장합니다.
portfolio = {
"KRW-BTC": 0.1,
"KRW-ETH": 2.5
}
​
현재가 조회
업비트 API를 호출해서 받은 JSON 데이터에서 trade_price 값을 꺼내면 됩니다.
for data in prices_data:
prices[data['market']] = data['trade_price']
​
가치 계산
각 코인의 가치는 현재가 × 수량으로 구하고, 총합은 반복문에서 누적합니다.
value = price * quantity
total_value += value
​
비중 계산
총합이 구해졌다면, 각 항목에 비중을 추가할 수 있습니다.
item["비중"] = (item["가치"] / total_value) * 100

## **3. [필수 과제] 문제2: 가격 알림 시스템**

<aside>
✅

특정 암호화폐의 가격이 목표가에 도달했을 때 알림을 주는 시스템을 만들어보시오:

1. 목표가 설정 (상한가, 하한가)
2. 현재가 모니터링
3. 목표가 도달 시 알림 메시지 출력
</aside>

### 구현 단계

1. **목표가 설정**
    - 감시할 코인 티커와 상한가·하한가를 미리 입력한다.
    - 예: `상한가 = 현재가 × 1.05`, `하한가 = 현재가 × 0.95`
2. **현재가 조회 함수 작성 (`get_single_price_api`)**
    - `requests` 모듈을 사용하여 업비트 API에서 단일 코인의 현재가를 조회한다.
    - 응답을 JSON으로 변환 후, `trade_price` 값을 반환한다.
3. **가격 알림 함수 작성 (`price_alert_system`)**

   (1) **기본 출력**

    - 코인명과 상한가·하한가 목표값을 안내 메시지로 출력한다.

   (2) **현재가 조회**

    - 반복문을 이용해 일정 횟수 동안 현재가를 가져온다.
    - 조회한 시간(`HH:MM:SS`)과 현재가를 함께 출력한다.

   (3) **알림 조건 확인**

    - 현재가가 상한가 이상이면 상한가 도달 메시지 출력
    - 현재가가 하한가 이하이면 하한가 도달 메시지 출력
    - 두 조건 모두 해당하지 않으면 정상 범위 메시지 출력
4. **모니터링 종료**
    - 설정한 횟수만큼 확인이 끝나면 모니터링을 종료한다.
- 구현 힌트 (펼쳐보기)
  목표가 설정
  현재가를 기준으로 상한가와 하한가를 계산합니다.
  high_target = current_price * 1.05
  low_target  = current_price * 0.95
  ​
  단일 현재가 조회
  응답 JSON은 리스트이며, 첫 원소 안에 trade_price가 들어 있습니다.
  data = response.json()[0]
  return data['trade_price']
  ​
  코인명 출력
  티커 "KRW-BTC"에서 "BTC"만 추출해 출력할 수 있습니다.
  coin_name = ticker.split("-")[1]
  ​
  알림 조건
  현재가가 상한가 이상이면 상한가 도달 메시지를,
  하한가 이하이면 하한가 도달 메시지를 출력합니다.
  if current_price >= target_high:
  # 상한가 도달 메시지 출력
elif current_price <= target_low:
# 하한가 도달 메시지 출력

- **반복 확인**
    - 여러 번 가격을 확인해야 하므로 **반복문**을 사용합니다.
    - 각 단계에서 현재 시간과 함께 현재가를 출력하면 더 직관적입니다.

    ```python
    current_time = datetime.now().strftime("%H:%M:%S")
    print(f"[{current_time}] 현재가: {current_price}")
    ```


---

## **4. [도전 과제] 문제 3: 암호화폐 수익률 계산기**

<aside>
✅

과거 특정 시점에 투자했다면 현재 수익률이 얼마인지 계산하는 프로그램을 작성하시오:

1. 투자 시점과 투자 금액 설정
2. 해당 시점의 가격과 현재 가격 비교
3. 수익률과 수익금 계산
</aside>

### 구현 단계

1. **투자 조건 설정**
    - 투자할 코인 티커, 투자 시점(며칠 전), 투자 금액을 입력한다.
    - 예: 비트코인, 30일 전, 100만원
2. **과거 데이터 조회 함수 작성 (`get_historical_data_api`)**
    - 업비트 `candles/days` API를 사용해 지정한 기간의 일봉 데이터를 가져온다.
    - 응답 데이터에서 투자 시점의 종가(`trade_price`)를 추출한다.
3. **현재가 조회 함수 작성 (`get_single_price_api`)**
    - 단일 티커의 현재 가격을 조회한다.
    - JSON 응답에서 trade_price를 반환한다.
4. **투자 수익률 계산 함수 작성 (`calculate_investment_return`)**

   (1) **투자 시점 가격 확인**

    - 투자 시점 가격으로 투자 금액 ÷ 가격 = 구매 수량을 계산한다.
      (2) **현재 가치 계산**

- 구매 수량 × 현재가 = 현재 가치

(3) **손익 및 수익률 계산**

- 손익 = 현재 가치 – 투자 금액
- 수익률 = (손익 ÷ 투자 금액) × 100
5. **결과 출력**
    - 투자 일자, 투자 금액, 투자 시점 가격, 구매 수량, 현재 가격, 현재 가치, 손익, 수익률을 순서대로 출력한다.

### 구현 힌트 (펼쳐보기)

- **과거 데이터 불러오기**
    - 업비트 일봉 API(`candles/days`)를 사용하면 과거 일자별 가격 데이터를 조회할 수 있습니다.
    - 응답 리스트에서 `'trade_price'`(종가)를 이용하면 투자 시점 가격을 알 수 있습니다.

    ```
    url = "https://api.upbit.com/v1/candles/days"
    params = {"market": ticker, "count": days_count}
    response = requests.get(url, params=params)
    candle_data = response.json()
    ```

- **투자 시점 가격 구하기**
    - `days_ago`일 전의 가격을 꺼내 투자 금액으로 몇 개를 살 수 있는지 계산합니다.
    - (힌트: `구매 수량 = 투자 금액 ÷ 투자 시점 가격`)
- **현재 가격 확인하기**

  단일 현재가 조회 API를 활용해 `trade_price`를 가져옵니다.
```
data = response.json()[0]
return data['trade_price']
```

- **수익률 계산하기**
    - 현재 가치 = `보유 수량 × 현재가`
    - 손익 = `현재 가치 - 투자금액`
    - 수익률 = `(손익 ÷ 투자금액) × 100`
- **결과 출력**
    - 투자 일자, 투자 금액, 투자 시점 가격, 구매 수량, 현재 가치, 손익, 수익률을 차례대로 출력하세요.
    - 날짜는 `datetime`을 사용해 `"YYYY-MM-DD"` 형식으로 바꿔줄 수 있습니다.

    ```
    investment_date.strftime('%Y-%m-%d')
    ```